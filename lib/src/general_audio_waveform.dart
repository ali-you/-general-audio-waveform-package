import 'dart:async';

import 'package:flutter/material.dart';
import 'package:general_audio_waveforms/src/data/common/scaling_algorithm_type.dart';
import 'package:general_audio_waveforms/src/data/scaling/average_algorithm.dart';
import 'package:general_audio_waveforms/src/data/scaling/median_algorithm.dart';
import 'package:general_audio_waveforms/src/data/source/wave_source.dart';
import 'package:general_audio_waveforms/src/waveforms/common/waveform.dart';
import 'package:general_audio_waveforms/src/waveforms/common/waveform_style.dart';
import 'package:general_audio_waveforms/src/waveforms/common/waveform_type.dart';
import 'package:general_audio_waveforms/src/waveforms/pulse_waveform/pulse_waveform.dart';

// ignore: must_be_immutable
class GeneralAudioWaveform extends StatefulWidget {
  final ScalingAlgorithmType scalingAlgorithm;
  final WaveformType waveformType;
  final WaveformStyle? waveformStyle;
  final Duration maxDuration;
  final Duration elapsedDuration;
  Function(Duration) elapsedIsChanged;
  final WaveSource source;
  int maxSamples;

  GeneralAudioWaveform({super.key,
    this.scalingAlgorithm = ScalingAlgorithmType.average,
    this.waveformType = WaveformType.pulse,
    this.waveformStyle,
    required this.maxDuration,
    required this.elapsedDuration,
    required this.elapsedIsChanged,
    required this.source,
    this.maxSamples = 100});

  @override
  State<GeneralAudioWaveform> createState() => _GeneralAudioWaveformState();
}

class _GeneralAudioWaveformState extends State<GeneralAudioWaveform> {
  List<double> samples = [];

  @override
  void initState() {
    // setSamples();
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: widget.waveformStyle?.width,
      height: widget.waveformStyle?.height,
      child: Stack(
        children: [
      PulseWaveform(
      height: widget.waveformStyle?.height ?? 100,
        width: widget.waveformStyle?.width ?? 100,
        inactiveColor: widget.waveformStyle?.inactiveColor ?? Colors.black38,
        activeColor: widget.waveformStyle?.activeColor ?? Colors.blueAccent,
        showActiveWaveform: widget.waveformStyle?.showActiveWaveform ?? true,
        activeBorderColor: widget.waveformStyle?.activeBorderColor ?? Colors.white,
        inactiveBorderColor:
        widget.waveformStyle?.inactiveBorderColor ?? Colors.white,
        borderWidth: widget.waveformStyle?.borderWidth ?? 0,
        isRoundedRectangle: widget.waveformStyle?.isRoundedRectangle ?? false,
        elapsedDuration: widget.elapsedDuration,
        maxDuration: widget.maxDuration,
        absolute: widget.waveformStyle?.absolute ?? false,
        activeGradient: widget.waveformStyle?.activeGradient,
        inactiveGradient: widget.waveformStyle?.inactiveGradient,
        invert: widget.waveformStyle?.invert ?? false,
          samples: [0.000008131634529491171, 0.00026445546392310135,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            -0.0003197746272145158, 0.00004851401297685173,
            -0.00014893045856086446, 0.00019613102949363846,
            -0.00039237498510153563, -0.00011644336505742579,
            0.000039950714399468275, 0.00004962800523606052,
            0.000147705766899489, -0.0006627398248668186,
            -0.00001674646558723666, -0.00031176737046152524,
            0.0007415883369386326, -0.00009572158214774422,
            0.0002753256362480342, 0.00021250372554780617,
            -0.0002893653742128268, 0.0003862197166218343,
            -0.00031424983636412705, 0.0001922221954327504,
            -0.00009277977734671139, 0.0003367631682183421,
            0.00020704828087462316, 0.000009178825425359749,
            0.0000747784004338042, -0.0005942366172649919,
            0.000200940091450977, 0.00007839903432711925,
            -0.000028588756799650954, 0.00011084986423328232,
            0.00023998644263148821, -0.0001986936570322876,
            0.0007030121401155219, -0.0005835025924806627,
            -0.0002567287728962258, -0.00009284912352391129,
            0.0001226145386235772, -0.000464874186638349,
            0.00047349474352712044, -0.0005656933490127652]
      ),
          // Waveform(elapsedDuration: widget.elapsedDuration,
          //     maxDuration: widget.maxDuration,
          //     waveformType: widget.waveformType,
          //     waveformStyle: widget.waveformStyle,
          //     samples: [0.000008131634529491171, 0.00026445546392310135,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     -0.0003197746272145158, 0.00004851401297685173,
          //     -0.00014893045856086446, 0.00019613102949363846,
          //     -0.00039237498510153563, -0.00011644336505742579,
          //     0.000039950714399468275, 0.00004962800523606052,
          //     0.000147705766899489, -0.0006627398248668186,
          //     -0.00001674646558723666, -0.00031176737046152524,
          //     0.0007415883369386326, -0.00009572158214774422,
          //     0.0002753256362480342, 0.00021250372554780617,
          //     -0.0002893653742128268, 0.0003862197166218343,
          //     -0.00031424983636412705, 0.0001922221954327504,
          //     -0.00009277977734671139, 0.0003367631682183421,
          //     0.00020704828087462316, 0.000009178825425359749,
          //     0.0000747784004338042, -0.0005942366172649919,
          //     0.000200940091450977, 0.00007839903432711925,
          //     -0.000028588756799650954, 0.00011084986423328232,
          //     0.00023998644263148821, -0.0001986936570322876,
          //     0.0007030121401155219, -0.0005835025924806627,
          //     -0.0002567287728962258, -0.00009284912352391129,
          //     0.0001226145386235772, -0.000464874186638349,
          //     0.00047349474352712044, -0.0005656933490127652]),
          Theme(
            data: ThemeData(
                sliderTheme: SliderThemeData(
                    thumbShape: SliderComponentShape.noOverlay,
                    activeTrackColor: Colors.transparent,
                    inactiveTrackColor: Colors.transparent,
                    overlayShape: SliderComponentShape.noThumb)),
            child: Slider(
                value: ((widget.elapsedDuration).inMilliseconds).toDouble(),
                max: ((widget.maxDuration).inMilliseconds).toDouble(),
                // divisions: (widget.maxDuration).inMilliseconds,
                onChanged: (double value) {
                  widget.elapsedIsChanged(
                      Duration(milliseconds: value.toInt()));
                }),
          ),
        ],
      ),
    );
  }

  Future<void> setSamples() async {
    var tempSamples = await widget.source.samples;
    switch (widget.scalingAlgorithm) {
      case ScalingAlgorithmType.average:
        samples =
            AverageAlgorithm(samples: tempSamples, maxSample: widget.maxSamples)
                .execute();
        break;
      case ScalingAlgorithmType.median:
        samples =
            MedianAlgorithm(samples: tempSamples, maxSample: widget.maxSamples)
                .execute();
        break;
      default:
        samples = tempSamples;
    }

    print(
        "*****************************************************************************************************************************************************************************");
    print(samples);
  }
}
